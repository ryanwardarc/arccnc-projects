<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="layernamestyle.css" type="text/css">
  <style>
        input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
  </style>
  <title>Layer Names</title>
</head>

<body onload="layerName()">
  <h1>AutoCAD to TPA CAD Layers</h1>
  
  <!--board input-->

  <div class="container">
    <div class="item1">
      <fieldset>
        <legend><strong>BOARD</strong></legend>
        <p id="board"></p>
        <button onclick="copyToClipboard('board')"> Copy text</button>
        <div class="tool">
          <label for="input1">Material Thickness (mm)</label>
          <input type="number" placeholder="18" id="input1" min="0" onkeyup="if(value<0) value=0;"> 
          </div>
      </fieldset>
 
  <!--Hole input-->
  
      <fieldset>
        <legend><strong>HOLE</strong></legend>
        <p id="hole"></p>
        <button onclick="copyToClipboard('hole')"> Copy text</button>
        <div class="tool">
          <div class="item4, item2">
            <label for="input2">Hole Depth (mm)</label>
            <input class="holeinput" type="number" placeholder="18" id="input2" min="0" onkeyup="if(value<0) value=0;">
          </div>
          <div class="item4">
            <label for="input3">Layer</label>
            <select class="holeinput" id="input3">
              <option value="0">0</option>
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </div>
        </div>
        </fieldset>
  
  <!--Pocket input-->
  
        <fieldset>
          <legend><strong>POCKET</strong></legend>
          <p id="pocket"></p>
          <button onclick="copyToClipboard('pocket')"> Copy text</button>
          <div class="tool">
            <div class="item4, item2">
              <label for="input4">Hole Depth (mm)</label>
              <input type="number" placeholder="18" id="input4" min="0" onkeyup="if(value<0) value=0;">
            </div>
            <div class="item4">
              <label for="input5">Layer</label>
              <select id="input5">
               <option value="0">0</option>
                <option value="1" >1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4"selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </div>
          </div>

  <!--Tool input-->
       
          <div class="tool"> 
            <div class="item4"> 
              <label for="input6">Select Tool </label>
              <select id="input6">
                <option value="" selected></option>
              </select>
            </div>
            <p class="item3"><strong><em>OR</em></strong></p>
            <div class="item3">
              <label for="input7">Tool #</label>
              <input type="number" placeholder="1001" id="input7" min="0" onkeyup="if(value<0) value=0;">
            </div>
          </div>
        </fieldset>
  
    </div>
    
  

  <!--outline & paths input-->
    <div class="item11">
  
    <fieldset>
      <legend><strong>OUTLINE & PATHS</strong></legend>
      <p id="outline"></p>
      <button onclick="copyToClipboard('outline')"> Copy text</button>

  <!--depth input-->
      
      <div class="tool">
        <div class="item4">
          <label for="input8">Rout Depth (mm)</label>
          <input type="number" placeholder="18" id="input8" min="0" onkeyup="if(value<0) value=0;">
        </div>
        <div class="item4">
          <label for="input9">Layer</label>
          <select id="input9">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7" selected>7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
      </div>
<!--Tool input-->
      <div class="tool">
        <div class="item4">
          <label for="input10">Select Tool </label>
          <select id="input10">
            <option value="" selected></option>
          </select>
        </div>
        <p class="item3"><strong><em>OR</em></strong></p>
        <div class="item3">
          <label for="input11">Tool #</label>
          <input type="number" placeholder="1001" id="input11" min="0" onkeyup="if(value<0) value=0;">
        </div>
      </div>
    
<!--compensation input-->

      <div>  
        <label for="input12">Compensation</label>
        <select id="input12" required>
          <option value="" selected></option>
          <option value="1">Left</option>
          <option value="2">Right</option>
          <option value="0">Off</option>
        </select>
      </div>

<!--incoming input-->
    
    <fieldset class="inout">
      <legend><strong>INCOMING</strong>
        <select id="input13" required>
        <option value="0">Unmanaged</option>
        <option value="1">Managed</option>
        </select>
      </legend>
        
<!--input for incoming - type-->
      
      
      <label class="griditem1" for="inType">Type</label>
      <select class="in" id="inType" required disabled>
        <option value="4" selected></option>
        <option value="1">Line</option>
        <option value="2">Left Arc</option>
        <option value="3">Right Arc</option>
      </select>
      

<!--input for incoming - length / radius-->

      
      <label class="griditem2" for="inLengthRad">Length/Radius</label>
      <input class="in" type="number" placeholder="50" id="inLengthRad" min="0" onkeyup="if(value<0) value=0;" disabled>
      

<!--input for incoming - path (deg)-->
      
      <label class="griditem3" for="inPathDeg">Path (degrees)</label>
      <input class="in" type="number" placeholder="50" id="inPathDeg" min="0" onkeyup="if(value<0) value=0;" disabled>
      

<!--input for incoming - initialZ (deg)-->

      
      <label class="griditem4" for="initialZ">Initial Z</label>
      <input class="in" type="number" placeholder="1" id="initialZ" min="0" onkeyup="if(value<0) value=0;" disabled>
      
      
<!--input for presets-->
      <p class="griditem5"><strong><em>OR</em></strong></p>
      
      <label class="griditem6" for="inPreset" >Preset</label>
      <select id="inPreset" required disabled>
        <option value="" selected></option>
        <option value="">Future Joinery</option>
        <option value="1">ARC</option>
      </select>
    
    </fieldset>
    
 <!--input for outgoing -->   
    <fieldset class="inout">
      <legend><strong>OUTGOING</strong>
        <select id="input14" required>
            <option value="0">Unmanaged</option>
            <option value="1">Managed</option>
        </select>
      </legend>

<!--input for outgoing - type-->
        
        
      <label class="griditem1" for="outType" >Type</label>
      <select class="out" id="outType" required disabled>
        <option value="4" selected></option>
        <option value="1">Line</option>
        <option value="2">Left Arc</option>
        <option value="3">Right Arc</option>
       </select>
        
          
<!--input for outgoing - length / radius-->

        
      <label class="griditem2" for="outLengthRad">inLength/Radius</label>
      <input class="out" type="number" placeholder="50" id="outLengthRad" min="0" onkeyup="if(value<0) value=0;" disabled>
        
          
<!--input for outgoing - path (deg)-->

        
      <label class="griditem3" for="outPathDeg">inPath (degrees)</label>
      <input class="out" type="number" placeholder="50" id="outPathDeg" min="0" onkeyup="if(value<0) value=0;" disabled>
        

<!--input for outgoing - finalZ -->

        
      <label class="griditem4" for="final Z">Final Z</label>
      <input class="out" type="number" placeholder="1" id="finalZ" min="0" onkeyup="if(value<0) value=0;" disabled>
        

<!--input for presets-->

      <p class="griditem5"><strong><em>OR</em></strong></p>
        
      <label class="griditem6" for="outPreset" >Preset</label>
      <select id="outPreset" required disabled>
        <option value="" selected></option>
        <option value="">Future Joinery</option>
        <option value="1">ARC</option>
      </select>
        
        
    </fieldset>
    
    </fieldset>
  </div>
  </div>
  
  
  


    
  <script>
    //define tools
  const tools = [
    tool = {
      number: 1002,
      name: "12mm Compression"
    },

    tool = {
      number: 1039,
      name: "10mm Downcut"
    },
     
    tool = {
      number: 1007,
      name: "16mm Upcut"
    },
      
    tool = {
      number: 1004,
      name: "V Tool"
    }
  ]

    //define prefixes
  const prefix = [
    
    board = {
      prefix: "BOARD",
      depth:  "ZP"
    },
        
    hole = {
      prefix: "HOLE",
      depth:  "Z",
      layer:  "WL"
    },

    pocket = {
      prefix: "STEMPTY",
      depth:  "Z",
      tool:   "T",
      layer:  "WL"
    },

    outLine = {
      prefix:             "MILL",
      depth:              "Z",
      tool:               "T",
      offset:             "K",
      incomingLine:       "I",
      inLineType:         "N",
      inLineLength:       "L",
      inLinePath:         "A",
      inLineStartDepth:   "S",
      outgoingLine:       "O",
      outLineType:        "U",
      outLineLength:      "G",
      outLinePath:        "B",
      outLineFinishDepth:  "F",
      layer:              "WL"
    }
  ]
    //define common variables
    const fetchId = (id) => document.getElementById(id);
    const fetchValue = (id) => document.getElementById(id).value;
    
    //copy to clipboard function
    function copyToClipboard(id){
      var copyLayerName = fetchId(id).innerHTML;
      navigator.clipboard.writeText(copyLayerName);
      alert("Copied text: " + copyLayerName);
    }
    
    //populate tool selection function
    function populateToolSelection(inputId){
      for (let i=0; i < tools.length; i++) {
        const toolOption = document.createElement("option");
        toolOption.innerHTML = tools[i].name;
        toolOption.value = tools[i].number;
        document.getElementById(inputId).appendChild(toolOption);
      }
    }
    
    //onload function
    function layerName() {
      fetchId('board').innerHTML = prefix[0].prefix;
      fetchId('hole').innerHTML = prefix[1].prefix;
      fetchId('pocket').innerHTML = prefix[2].prefix;
      fetchId('outline').innerHTML = prefix[3].prefix;
      populateToolSelection('input6')
      populateToolSelection('input10')
    }

    //define layer arrays 
    const boardOutput = [prefix[0].prefix];
    const holeOutput = [prefix[1].prefix];
    const pocketOutput = [prefix[2].prefix];
    const outlineOutput = [prefix[3].prefix];

    //prefix and value function
    function getPrefixAndValue(id,layerName,[index],prefixIndexAndName){
    var inputValue = fetchValue(id)
    if (inputValue > 0) {layerName[index] = prefixIndexAndName + inputValue;}
    else {layerName[index] = null}
    }
        
    //depth with working layer function
    function displayDepthWL(zInput,outputArray,layerInput,output,[prefixIndex]){
      if (fetchValue(zInput) > 0){
        getPrefixAndValue(zInput,outputArray,[1],prefix[prefixIndex].depth)
        getPrefixAndValue(layerInput,outputArray,[15],prefix[prefixIndex].layer)
        fetchId(output).innerHTML = outputArray.join('')}
      else {
        outputArray[1] = null
        outputArray[15] = null
        fetchId(output).innerHTML = outputArray.join('')}
      
      fetchId(layerInput).oninput = function (){
        getPrefixAndValue(this.id,outputArray,[15],prefix[prefixIndex].layer)
        fetchId(output).innerHTML = outputArray.join('')}}

    //tool selection function
    function displayTool(input1,input2,outputArray,output,[prefixIndex]){
      if (fetchValue(input2) > 0){
        fetchId(input1).disabled = true
        fetchId('input10').selectedIndex = 0;
        getPrefixAndValue(input2,outputArray,[3],prefix[prefixIndex].tool)
        fetchId(output).innerHTML = outputArray.join('')}
      else {
        fetchId(input1).disabled = false
        getPrefixAndValue(input1,outputArray,[3],prefix[prefixIndex].tool)
        fetchId(output).innerHTML = outputArray.join('')}}

    //board onInput function
    fetchId('input1').oninput = function (){
      getPrefixAndValue(this.id,boardOutput,[1],prefix[0].depth)
      fetchId('board').innerHTML = boardOutput.join('')
      }

    //hole onInput function
    fetchId('input2').oninput = function () {displayDepthWL(this.id,holeOutput,'input3','hole',[1])}
    fetchId('input3').oninput = function () {displayDepthWL(this.id,holeOutput,'input3','hole',[1])}
        
    //pocket onInput function
    fetchId('input4').oninput = function () {displayDepthWL(this.id,pocketOutput,'input5','pocket',[3])}
    fetchId('input5').oninput = function () {displayDepthWL(this.id,pocketOutput,'input5','pocket',[3])}
    fetchId('input6').oninput = function () {displayTool(this.id,'input7',pocketOutput,'pocket',[3])}
    fetchId('input7').oninput = function () {displayTool('input6',this.id,pocketOutput,'pocket',[3])} 
    
    //outline onInput function
    fetchId('input8').oninput = function () {displayDepthWL(this.id,outlineOutput,'input9','outline',[3])}
    fetchId('input9').oninput = function () {displayDepthWL(this.id,outlineOutput,'input9','outline',[3])} 
    fetchId('input10').oninput = function () {displayTool(this.id,'input11',outlineOutput,'outline',[3])}
    fetchId('input11').oninput = function () {displayTool('input10',this.id,outlineOutput,'outline',[3])}
    fetchId('input12').oninput = function (){
      getPrefixAndValue('input12',outlineOutput,[4],prefix[3].offset)
      fetchId('outline').innerHTML = outlineOutput.join('')}
    
    fetchId('input13').oninput = function () {selectInLineOutLine('input13',[5],prefix[3].incomingLine,'.in')}
    fetchId('input14').oninput = function () {selectInLineOutLine('input14',[10],prefix[3].outgoingLine,'.out')}
    function selectInLineOutLine(input,[outputIndex],prefixIndexAndName,class1){
      if (fetchValue(input) > 0){
      getPrefixAndValue(input,outlineOutput,[outputIndex],prefixIndexAndName)
      fetchId('outline').innerHTML = outlineOutput.join('')
      var inputs = document.querySelectorAll(class1)
      for (let i = 0; i < inputs.length; i++){inputs[i].disabled = false}}
      else {
      var inputs = document.querySelectorAll(class1)
       for (let i = 0; i < inputs.length; i++){
        inputs[i].disabled = true;
        inputs[i].selectedIndex = 0;
        inputs[i].value = ""}
       outlineOutput[outputIndex] = null
       outlineOutput[outputIndex+1] = null
       fetchId('outline').innerHTML = outlineOutput.join('')
      }
    }

    fetchId('inType').oninput = function(){selectInOutType('inType',outlineOutput,[6],prefix[3].inLineType)}
    fetchId('outType').oninput = function(){selectInOutType('outType',outlineOutput,[11],prefix[3].outLineType)}
    function selectInOutType(input,outlineOutput,[outputIndex],prefixIndexAndName){
      if (fetchValue(input) < 4) {
      //getPrefixAndValue(input,outlineOutput,[outputIndex],prefixIndexAndName)
      outlineOutput[outputIndex] = prefixIndexAndName + (fetchValue(input)-1)
      fetchId('outline').innerHTML = outlineOutput.join('')}
      else if (fetchValue(input) >3) {outlineOutput[outputIndex] = ""
      fetchId('outline').innerHTML = outlineOutput.join('')}
      else if (fetchValue(input) >1){fetchId('inPathDeg').disabled = false;}
      else {fetchId('inPathDeg').disabled = true;}}

    fetchId('inLengthRad').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[7],prefix[3].inLineLength)
      fetchId('outline').innerHTML = outlineOutput.join('')}
      
    fetchId('inPathDeg').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[8],prefix[3].inLinePath)
      fetchId('outline').innerHTML = outlineOutput.join('')}
      
    fetchId('initialZ').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[9],prefix[3].inLineStartDepth)
      fetchId('outline').innerHTML = outlineOutput.join('')}

    fetchId('outLengthRad').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[12],prefix[3].outLineLength)
      fetchId('outline').innerHTML = outlineOutput.join('')}

    fetchId('outPathDeg').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[13],prefix[3].outLinePath)
      fetchId('outline').innerHTML = outlineOutput.join('')}
 
    fetchId('finalZ').oninput = function (){
      getPrefixAndValue(this.id,outlineOutput,[14],prefix[3].outLineFinishDepth)
      fetchId('outline').innerHTML = outlineOutput.join('')}

  </script>
</body>
</html>